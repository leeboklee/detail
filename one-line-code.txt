(function(){const ws=new WebSocket('ws://localhost:3901');ws.onopen=()=>{console.log('âœ… ëª¨ë‹ˆí„°ë§ ì‹œì‘!');document.body.style.border='3px solid #10b981';const e=console.error;console.error=function(...a){const m=a.join(' ');if(m.includes('Text content does not match server-rendered HTML')||m.includes('Server:')&&m.includes('Client:')){ws.send(JSON.stringify({type:'hydration-error',message:m,priority:'high',timestamp:new Date().toISOString()}));console.log('ğŸ” Hydration ì˜¤ë¥˜ ê°ì§€:',m);}ws.send(JSON.stringify({type:'console-error',message:m,priority:'high',timestamp:new Date().toISOString()}));e.apply(console,a);};window.addEventListener('error',(ev)=>{const m=ev.message||'';if(m.includes('Text content does not match server-rendered HTML')||m.includes('hydration')||(m.includes('Server:')&&m.includes('Client:'))){ws.send(JSON.stringify({type:'hydration-error',message:m,priority:'high',timestamp:new Date().toISOString()}));console.log('ğŸ” Hydration ì˜¤ë¥˜ ê°ì§€:',m);}ws.send(JSON.stringify({type:'window-error',message:m,filename:ev.filename,lineno:ev.lineno,colno:ev.colno,priority:'high',timestamp:new Date().toISOString()}));});window.addEventListener('unhandledrejection',(ev)=>{ws.send(JSON.stringify({type:'unhandled-rejection',message:ev.reason?.toString()||'Unknown rejection',priority:'high',timestamp:new Date().toISOString()}));});const obs=new MutationObserver((mutations)=>{mutations.forEach((m)=>{if(m.type==='childList'){m.addedNodes.forEach((n)=>{if(n.nodeType===Node.ELEMENT_NODE){const h=n.querySelectorAll('[data-hydration-error], .hydration-error');if(h.length>0){ws.send(JSON.stringify({type:'hydration-error',message:'DOMì—ì„œ Hydration ì˜¤ë¥˜ ìš”ì†Œ ë°œê²¬',priority:'high',timestamp:new Date().toISOString()}));}}});}});});obs.observe(document.body,{childList:true,subtree:true,attributes:true});setInterval(()=>{const h=document.querySelectorAll('[data-hydration-error], .hydration-error');if(h.length>0){ws.send(JSON.stringify({type:'hydration-error',message:'ì£¼ê¸°ì  ì²´í¬ì—ì„œ Hydration ì˜¤ë¥˜ ë°œê²¬',priority:'high',timestamp:new Date().toISOString()}));}},3000);window.executeFixCommand=function(cmd){console.log('ğŸ”§ ëª…ë ¹ì–´ ì‹¤í–‰:',cmd);switch(cmd){case'fix-hydration':console.log('ğŸ”„ Hydration ì˜¤ë¥˜ ìˆ˜ì •: í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨');window.location.reload();break;case'reload':console.log('ğŸ”„ í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨');window.location.reload();break;case'clear-storage':console.log('ğŸ—‘ï¸ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í´ë¦¬ì–´');localStorage.clear();sessionStorage.clear();break;default:console.log('âŒ ì•Œ ìˆ˜ ì—†ëŠ” ëª…ë ¹ì–´:',cmd);}};ws.onmessage=(ev)=>{try{const d=JSON.parse(ev.data);if(d.type==='fix-command'&&window.executeFixCommand){window.executeFixCommand(d.command);}}catch(err){console.error('âŒ WebSocket ë©”ì‹œì§€ ì²˜ë¦¬ ì˜¤ë¥˜:',err);}};};ws.onclose=()=>{console.log('âŒ WebSocket ì—°ê²° í•´ì œë¨');document.body.style.border='3px solid #ef4444';setTimeout(()=>{console.log('ğŸ”„ WebSocket ì¬ì—°ê²° ì‹œë„...');location.reload();},3000);};ws.onerror=(err)=>{console.error('âŒ WebSocket ì˜¤ë¥˜:',err);document.body.style.border='3px solid #f59e0b';};})();
