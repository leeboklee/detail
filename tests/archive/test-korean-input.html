<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œê¸€ ì…ë ¥ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
        }
        .test-container {
            border: 1px solid #ccc;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }
        input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 16px;
            margin: 10px 0;
        }
        .result {
            margin: 10px 0;
            padding: 10px;
            background-color: #f5f5f5;
            border-radius: 4px;
        }
        .success {
            background-color: #d4edda;
            color: #155724;
        }
        .error {
            background-color: #f8d7da;
            color: #721c24;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>ğŸ‡°ğŸ‡· í•œê¸€ ì…ë ¥ í…ŒìŠ¤íŠ¸</h1>
    <p>ì•„ë˜ ì…ë ¥ í•„ë“œì— í•œê¸€ì„ ì…ë ¥í•˜ê³  í…ŒìŠ¤íŠ¸ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
    
    <div class="test-container">
        <h3>í…ŒìŠ¤íŠ¸ ì…ë ¥ í•„ë“œ</h3>
        <input type="text" id="testInput" placeholder="ì—¬ê¸°ì— í•œê¸€ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ë””ëŸ­ìŠ¤ íŠ¸ìœˆë£¸)" />
        <div id="inputResult" class="result">ì…ë ¥ê°’ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
        
        <button onclick="runTest()">ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <button onclick="clearTest()">ğŸ—‘ï¸ ì´ˆê¸°í™”</button>
    </div>
    
    <div class="test-container">
        <h3>ìë™ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤</h3>
        <button onclick="runAutoTests()">ğŸš€ ìë™ í…ŒìŠ¤íŠ¸ ì‹¤í–‰</button>
        <div id="autoResults"></div>
    </div>

    <script>
        // ì…ë ¥ ì´ë²¤íŠ¸ ë¡œê¹…
        const testInput = document.getElementById('testInput');
        let isComposing = false;
        
        testInput.addEventListener('compositionstart', (e) => {
            console.log('ğŸ‡°ğŸ‡· ì¡°í•© ì‹œì‘:', e.target.value);
            isComposing = true;
        });
        
        testInput.addEventListener('compositionupdate', (e) => {
            console.log('ğŸ‡°ğŸ‡· ì¡°í•© ì—…ë°ì´íŠ¸:', e.target.value);
        });
        
        testInput.addEventListener('compositionend', (e) => {
            console.log('ğŸ‡°ğŸ‡· ì¡°í•© ì¢…ë£Œ:', e.target.value);
            isComposing = false;
            updateResult();
        });
        
        testInput.addEventListener('input', (e) => {
            console.log('ğŸ“ ì…ë ¥ ì´ë²¤íŠ¸:', e.target.value, 'isComposing:', isComposing);
            if (!isComposing) {
                updateResult();
            }
        });
        
        function updateResult() {
            const value = testInput.value;
            const resultDiv = document.getElementById('inputResult');
            resultDiv.textContent = `í˜„ì¬ ê°’: "${value}" (ê¸¸ì´: ${value.length})`;
            resultDiv.className = value ? 'result success' : 'result';
        }
        
        function runTest() {
            const value = testInput.value;
            const resultDiv = document.getElementById('inputResult');
            
            if (!value) {
                resultDiv.textContent = 'âŒ ì…ë ¥ê°’ì´ ì—†ìŠµë‹ˆë‹¤.';
                resultDiv.className = 'result error';
                return;
            }
            
            resultDiv.innerHTML = `
                <strong>âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼:</strong><br>
                ì…ë ¥ê°’: "${value}"<br>
                ê¸¸ì´: ${value.length}ì<br>
                í•œê¸€ í¬í•¨: ${/[ê°€-í£]/.test(value) ? 'ì˜ˆ' : 'ì•„ë‹ˆì˜¤'}
            `;
            resultDiv.className = 'result success';
        }
        
        function clearTest() {
            testInput.value = '';
            updateResult();
        }
        
        async function runAutoTests() {
            const testCases = [
                'ë””ëŸ­ìŠ¤ íŠ¸ìœˆë£¸',
                'ë”ë¸”ë² ë“œ',
                'í‚¹ì‚¬ì´ì¦ˆ ë² ë“œ',
                '35í‰',
                'City View'
            ];
            
            const resultsDiv = document.getElementById('autoResults');
            resultsDiv.innerHTML = '<h4>ìë™ í…ŒìŠ¤íŠ¸ ì§„í–‰ ì¤‘...</h4>';
            
            let results = [];
            
            for (let i = 0; i < testCases.length; i++) {
                const testValue = testCases[i];
                console.log(`í…ŒìŠ¤íŠ¸ ${i + 1}: "${testValue}"`);
                
                // ì…ë ¥ í•„ë“œ ì´ˆê¸°í™”
                testInput.value = '';
                testInput.focus();
                
                // í•œ ê¸€ìì”© ì…ë ¥ ì‹œë®¬ë ˆì´ì…˜
                for (let char of testValue) {
                    testInput.value += char;
                    testInput.dispatchEvent(new Event('input', { bubbles: true }));
                    await new Promise(resolve => setTimeout(resolve, 100));
                }
                
                // ì…ë ¥ ì™„ë£Œ ëŒ€ê¸°
                await new Promise(resolve => setTimeout(resolve, 500));
                
                const finalValue = testInput.value;
                const success = finalValue === testValue;
                
                results.push({
                    input: testValue,
                    output: finalValue,
                    success: success
                });
                
                console.log(`ê²°ê³¼: "${testValue}" â†’ "${finalValue}" (${success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'})`);
            }
            
            // ê²°ê³¼ í‘œì‹œ
            let html = '<h4>ìë™ í…ŒìŠ¤íŠ¸ ê²°ê³¼</h4>';
            let successCount = 0;
            
            results.forEach((result, index) => {
                const statusClass = result.success ? 'success' : 'error';
                const statusIcon = result.success ? 'âœ…' : 'âŒ';
                
                html += `
                    <div class="result ${statusClass}">
                        ${statusIcon} í…ŒìŠ¤íŠ¸ ${index + 1}: "${result.input}"<br>
                        ê²°ê³¼: "${result.output}"<br>
                        ìƒíƒœ: ${result.success ? 'ì„±ê³µ' : 'ì‹¤íŒ¨'}
                    </div>
                `;
                
                if (result.success) successCount++;
            });
            
            const successRate = (successCount / results.length) * 100;
            html += `
                <div class="result ${successRate === 100 ? 'success' : 'error'}">
                    <strong>ìµœì¢… ì„±ê³µë¥ : ${successCount}/${results.length} (${successRate}%)</strong>
                </div>
            `;
            
            resultsDiv.innerHTML = html;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        updateResult();
    </script>
</body>
</html> 