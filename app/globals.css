@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* NextUI 테마 호환 커스터마이징 */
@layer components {
  /* 모달 관련 스타일 */
  .modal-overlay {
    z-index: 9998 !important;
  }
  
  .modal-content {
    z-index: 9999 !important;
  }
  
  .modal-header {
    position: sticky;
    top: 0;
    background: white;
    z-index: 10;
    border-bottom: 1px solid #e5e7eb;
    padding-bottom: 1rem;
  }
  
  .modal-footer {
    position: sticky;
    bottom: 0;
    background: white;
    z-index: 10;
    border-top: 1px solid #e5e7eb;
    padding-top: 1rem;
  }
  
  .modal-body {
    overflow-y: auto;
    max-height: 70vh;
    padding: 1rem 1.5rem;
  }
  
  /* 모달 내부 스크롤바 스타일 */
  .modal-body::-webkit-scrollbar {
    width: 6px;
  }
  
  .modal-body::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 3px;
  }
  
  .modal-body::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 3px;
  }
  
  .modal-body::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  /* NextUI 컴포넌트 호환성 - 기본 스타일만 */
  .nextui-input-wrapper label {
    margin-bottom: 0.75rem;
    display: block;
    color: #000000 !important;
  }

  /* NextUI 입력필드 기본 스타일 */
.nextui-input,
.nextui-input-wrapper input,
.nextui-input-wrapper textarea,
.nextui-input-wrapper select {
  line-height: 1.5;
  padding: 12px 16px;
  font-size: 14px;
  min-height: 48px;
  box-sizing: border-box;
  color: #000000 !important;
  background-color: #ffffff !important;
}

/* NextUI 입력 필드 내부 텍스트 강제 검정색 */
.nextui-input input,
.nextui-input textarea,
.nextui-input select,
.nextui-input-wrapper input,
.nextui-input-wrapper textarea,
.nextui-input-wrapper select {
  color: #000000 !important;
}

/* NextUI 입력 필드에 값이 있을 때 */
.nextui-input input:not(:placeholder-shown),
.nextui-input textarea:not(:placeholder-shown),
.nextui-input-wrapper input:not(:placeholder-shown),
.nextui-input-wrapper textarea:not(:placeholder-shown) {
  color: #000000 !important;
}

/* NextUI 입력 필드 포커스 시 */
.nextui-input input:focus,
.nextui-input textarea:focus,
.nextui-input-wrapper input:focus,
.nextui-input-wrapper textarea:focus {
  color: #000000 !important;
}

  /* NextUI placeholder 스타일 - 완전히 숨김 */
  .nextui-input::placeholder,
  .nextui-input-wrapper input::placeholder,
  .nextui-input-wrapper textarea::placeholder,
  .nextui-input-wrapper select::placeholder {
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* 모든 placeholder 완전 숨김 */
  input::placeholder,
  textarea::placeholder,
  select::placeholder {
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* NextUI 입력 필드 포커스 시 placeholder 숨김 */
  .nextui-input:focus::placeholder,
  .nextui-input-wrapper input:focus::placeholder,
  .nextui-input-wrapper textarea:focus::placeholder,
  .nextui-input-wrapper select:focus::placeholder {
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* NextUI 입력 필드에 값이 있을 때 placeholder 숨김 */
  .nextui-input:not(:placeholder-shown)::placeholder,
  .nextui-input-wrapper input:not(:placeholder-shown)::placeholder,
  .nextui-input-wrapper textarea:not(:placeholder-shown)::placeholder,
  .nextui-input-wrapper select:not(:placeholder-shown)::placeholder {
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* 입력 필드에 값이 있을 때 placeholder 완전 숨김 */
  .nextui-input:not([value=""]):not([value="0"])::placeholder,
  .nextui-input-wrapper input:not([value=""]):not([value="0"])::placeholder,
  .nextui-input-wrapper textarea:not([value=""]):not([value="0"])::placeholder {
    opacity: 0 !important;
    visibility: hidden !important;
  }

  /* 모든 입력 필드에 대한 강화된 placeholder 처리 */
input:not(:placeholder-shown)::placeholder,
textarea:not(:placeholder-shown)::placeholder,
select:not(:placeholder-shown)::placeholder {
  opacity: 0 !important;
}

/* 값이 있는 입력 필드의 placeholder 숨김 */
input[value]:not([value=""]):not([value="0"])::placeholder,
textarea:not(:empty)::placeholder {
  opacity: 0 !important;
}

/* 모든 입력 필드 텍스트 강제 검정색 (최우선) */
input, textarea, select, 
input[type="text"], input[type="email"], input[type="password"], input[type="number"],
textarea, select {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

/* NextUI 모든 입력 요소 강제 검정색 */
.nextui-input *,
.nextui-input-wrapper *,
[data-slot="input"] *,
[data-slot="wrapper"] * {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

/* NextUI 컴포넌트 전체 텍스트 강제 검정색 */
.nextui-* {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

.nextui-* * {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

/* 모든 컴포넌트 텍스트 강제 검정색 */
[class*="nextui"] {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

[class*="nextui"] * {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

  /* NextUI 입력필드 포커스 상태 */
  .nextui-input:focus-within,
  .nextui-input-wrapper:focus-within {
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
  }

  /* 모든 텍스트 강제 검정색 (최종 강화) */
  .nextui-button,
  .nextui-button *,
  .nextui-card,
  .nextui-card *,
  .nextui-modal,
  .nextui-modal *,
  .nextui-input,
  .nextui-input *,
  .nextui-input-wrapper,
  .nextui-input-wrapper * {
    color: #000000 !important;
    -webkit-text-fill-color: #000000 !important;
  }

  /* 입력창 라벨/텍스트 겹침 방지 유틸리티 */
  /* 컴포넌트에서 className="text-overlap-fix" 를 사용하면 라벨과 입력창이 겹치지 않도록 보정한다 */
  .text-overlap-fix {
    display: inline-block !important;
    box-sizing: border-box !important;
    padding: 0.5rem 0.75rem !important;
    min-height: 40px !important;
    line-height: 1.6 !important;
    vertical-align: middle !important;
    overflow: visible !important;
    position: relative !important;
    z-index: 1 !important;
    background: white !important;
    font-family: inherit !important;
    font-size: inherit !important;
  }

  /* 강화된 겹침 방지 클래스 */
  .no-overlap {
    position: relative !important;
    z-index: 1 !important;
    background: white !important;
    isolation: isolate !important;
  }

  .no-overlap input,
  .no-overlap textarea {
    position: relative !important;
    z-index: 1 !important;
    background: white !important;
    isolation: isolate !important;
  }

  /* NextUI 특정 겹침 문제 해결 */
  .nextui-input-wrapper.no-overlap {
    isolation: isolate !important;
    contain: layout !important;
  }

  .nextui-input-wrapper.no-overlap .nextui-input {
    isolation: isolate !important;
    contain: layout !important;
  }

  /* 입력 placeholder 가 텍스트와 겹치는 경우 보정 (크로스브라우저) */
  .nextui-input-wrapper input::placeholder,
  .nextui-input-wrapper textarea::placeholder,
  input::placeholder,
  textarea::placeholder {
    opacity: 0.8;
    color: #9ca3af; /* tailwind gray-400 */
    font-size: 0.95rem;
    line-height: 1.6;
  }

  /* 입력 내부 텍스트와 높이 불일치 방지 */
  .nextui-input,
  .nextui-input-wrapper input,
  .nextui-input-wrapper textarea,
  .nextui-input-wrapper select {
    min-height: 48px;
    padding: 12px 16px;
    line-height: 1.6;
  }

  /* inputWrapper 높이 강제 클래스(h-12) 보정 */
  .nextui-input-wrapper.h-12,
  .nextui-input-wrapper.h-12 > .nextui-input,
  .nextui-input-wrapper.h-12 input {
    height: 3rem !important; /* 48px */
    min-height: 3rem !important;
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
    box-sizing: border-box;
    line-height: 1.6;
  }

  /* 외부 레이블과 함께 쓰이는 경우 레이블 마진을 충분히 확보 */
  label.block {
    display: block;
    margin-bottom: 0.5rem;
  }

  /* NextUI 내부 라벨 스타일 보정 (우선순위 확보) */
  .nextui-input-wrapper label {
    margin-bottom: 0.5rem !important;
    display: block !important;
    background: transparent !important;
    z-index: 2;
    position: relative !important;
    pointer-events: none !important;
  }

  /* NextUI 입력 필드 겹침 문제 완전 해결 */
  .nextui-input-wrapper {
    position: relative !important;
    z-index: 1 !important;
  }

  .nextui-input-wrapper .nextui-input {
    position: relative !important;
    z-index: 1 !important;
    background: white !important;
  }

  .nextui-input-wrapper input,
  .nextui-input-wrapper textarea {
    position: relative !important;
    z-index: 1 !important;
    background: white !important;
    font-family: inherit !important;
    font-size: inherit !important;
  }

  /* 입력 필드 내부 텍스트 겹침 방지 */
  .nextui-input-wrapper input,
  .nextui-input-wrapper textarea {
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
    overflow: hidden !important;
  }

  .nextui-input-wrapper textarea {
    white-space: pre-wrap !important;
    overflow-wrap: break-word !important;
  }

  /* 포커스 시 겹침 방지 강화 */
  .nextui-input-wrapper:focus-within {
    z-index: 10 !important;
  }

  .nextui-input-wrapper:focus-within .nextui-input {
    z-index: 11 !important;
  }

  .nextui-input-wrapper:focus-within input,
  .nextui-input-wrapper:focus-within textarea {
    z-index: 11 !important;
  }

  /* 필수 테이블 스타일 */
  .enhanced-table {
    @apply w-full;
  }

  .enhanced-table th {
    @apply bg-gray-50 text-gray-600 text-xs font-medium uppercase tracking-wider;
  }

  .enhanced-table tr:hover {
    @apply bg-blue-50 border-l-4 border-l-blue-500;
  }

  /* 빈 상태 스타일 */
  .empty-state {
    @apply py-12 text-center text-gray-500;
  }

  .empty-state-icon {
    @apply text-4xl mb-3 opacity-50;
  }

  /* 스크롤바 숨김 유틸리티 */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* textarea 스크롤바 제거 */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
    overflow: visible;
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }

  /* 미리보기 텍스트 색상 */
  .preview-content {
    @apply text-gray-900;
  }

  .preview-content h1,
  .preview-content h2,
  .preview-content h3,
  .preview-content h4,
  .preview-content h5,
  .preview-content h6 {
    @apply text-gray-900 font-semibold;
  }

  .preview-content p,
  .preview-content div,
  .preview-content span {
    @apply text-gray-700;
  }

  .preview-content strong {
    @apply font-semibold text-gray-900;
  }
}

/* 기본 CSS 리셋 */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  font-size: 16px;
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: 'Inter', 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  background: #fafafa;
  color: #000000 !important;
}

/* 모든 텍스트 요소에 검정색 강제 적용 */
* {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

/* 모든 텍스트 강제 검정색 (최우선) */
body, div, span, p, h1, h2, h3, h4, h5, h6, 
label, button, a, li, td, th, input, textarea, select {
  color: #000000 !important;
  -webkit-text-fill-color: #000000 !important;
}

/* 입력 필드 내부 텍스트 강제 검정색 */
input, textarea, select {
  color: #000000 !important;
  background-color: #ffffff !important;
}

/* 입력 필드에 값이 있을 때 텍스트 색상 */
input:not(:placeholder-shown), 
textarea:not(:placeholder-shown), 
select:not(:placeholder-shown) {
  color: #000000 !important;
}

/* 포커스된 입력 필드 텍스트 색상 */
input:focus, 
textarea:focus, 
select:focus {
  color: #000000 !important;
}

/* 입력 필드 텍스트 색상 */
input, textarea, select {
  color: #000000 !important;
  background-color: #ffffff !important;
}

/* 라벨 텍스트 색상 */
label {
  color: #000000 !important;
}

/* 버튼 텍스트 색상 */
button {
  color: #000000 !important;
}

/* 헤딩 텍스트 색상 */
h1, h2, h3, h4, h5, h6 {
  color: #000000 !important;
}

  /* 일반 텍스트 색상 */
p, span, div {
  color: #000000 !important;
}

/* NextUI 버튼 텍스트 색상 */
.nextui-button {
  color: #000000 !important;
}

.nextui-button-text {
  color: #000000 !important;
}

/* NextUI 카드 텍스트 색상 */
.nextui-card {
  color: #000000 !important;
}

.nextui-card-body {
  color: #000000 !important;
}

/* NextUI 모달 텍스트 색상 */
.nextui-modal {
  color: #000000 !important;
}

.nextui-modal-header {
  color: #000000 !important;
}

.nextui-modal-body {
  color: #000000 !important;
}

/* 접근성 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* 스크롤바 스타일링 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100;
  border-radius: 9999px;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-400;
  border-radius: 9999px;
  transition: background 150ms;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500;
}

/* 포커스 스타일 */
*:focus {
  outline: 2px solid #3b82f6;
  outline-offset: 2px;
}

.focus\:outline-none:focus {
  outline: none;
}

/* 프린트 스타일 */
@media print {
  .no-print {
    display: none !important;
  }
}

/* 하이드레이션 안전장치 */
.hydration-safe {
  visibility: hidden;
}

.hydration-safe.hydrated {
  visibility: visible;
}

.hydration-complete .hydration-safe {
  visibility: visible;
}

/* 서버사이드 렌더링 중 숨김 */
.ssr-hidden {
  display: none;
}

.client-only {
  display: none;
}

/* 클라이언트에서만 표시 */
@media (min-width: 0px) {
  .client-only {
    display: block;
  }
}

/* 하이드레이션 완료 후 표시 */
.hydration-complete .client-only {
  display: block;
}